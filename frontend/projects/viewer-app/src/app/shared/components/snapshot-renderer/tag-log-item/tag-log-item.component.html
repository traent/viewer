<div class="opal-fx-row">

  <app-image-icon [image]="itemImage$ | async"></app-image-icon>

  <div class="log-description opal-w-full opal-ml-3 opal-break-word">
    <ng-container *ngIf="props$ | async as props; else skeleton">

      <div
        *ngIf="{
          member: props.member.name,
          memberClass: props.member.class,
          tagType: props.tagTypeLabel,
          originalTagName: props.previousTagNameValue | escapeHtml,
          originalTagClass: props.previousTagNameClass,
          tagName: props.tagNameValue | escapeHtml,
          tagClass: props.tagNameClass
        } as translateParams"
        #snapshotContainer
        class="snapshot-content"
        [ngSwitch]="props.operation">
        <span
          *ngSwitchCase="'creation'"
          [innerHtml]="'i18n.SnapshotItem.OperationLabel.Tag.creation' | translate : translateParams | safeHtml">
        </span>
        <span
          *ngSwitchCase="'update'"
          [innerHtml]="(props.updateType === 'name'
            ? 'i18n.SnapshotItem.OperationLabel.Tag.rename'
            : 'i18n.SnapshotItem.OperationLabel.Tag.update') | translate : translateParams | safeHtml">
          </span>
        <span
          *ngSwitchCase="'deletion'"
          [innerHtml]="'i18n.SnapshotItem.OperationLabel.Tag.removal' | translate : translateParams | safeHtml">
        </span>
      </div>

      <ng-container *ngSwitchCase="'creation'">
        <span [class]="props.member.class">{{ props.member.name }}</span>
        created the {{ props.tagTypeLabel }}
        <i [class]="props.tagNameClass">{{ props.tagNameValue }}</i>
      </ng-container>
      <ng-container *ngSwitchCase="'update'">
        <ng-container *ngIf="props.updateType === 'name'">
          <span [class]="props.member.class">{{ props.member.name }}</span>
          renamed
          <i class="{{ props.previousTagNameClass }}">{{ props.previousTagNameValue }}</i>
          to
          <i [class]="props.tagNameClass">{{ props.tagNameValue }}</i>
        </ng-container>
        <ng-container *ngIf="props.updateType === 'description'">
          <span [class]="props.member.class">{{ props.member.name }}</span>
          modified
          <i [class]="props.tagNameClass">{{ props.tagNameValue }}</i>
          description
        </ng-container>
        <ng-container *ngIf="props.updateType === 'generic'">
          <span [class]="props.member.class">{{ props.member.name }}</span>
          updated {{ props.obj.type }}
          <i [class]="props.tagNameClass">{{ props.tagNameValue }}</i>
        </ng-container>
      </ng-container>
      <ng-container *ngSwitchCase="'deletion'">
        <span [class]="props.member.class">{{ props.member.name }}</span>
        delete the {{ props.tagTypeLabel }}
        <i [class]="props.tagNameClass">{{ props.tagNameValue }}</i>
      </ng-container>
    </ng-container>
  </div>
</div>

<ng-template #skeleton>
  <div class="opal-fx-g-1">
    <ngx-t3-skeleton class="opal-h-4"></ngx-t3-skeleton>
  </div>
</ng-template>
